{template 'common/header'}

<ul class="nav nav-tabs">
    <li class="active"><a href="{php echo $this->createWebUrl('question_manager')}">总览</a></li>
    <li><a href="{php echo $this->createWebUrl('question_manager').'&action=add'}">添加题目</a></li>
</ul>

<table class="we7-table">
    <thead>
    <tr>
        <th>标题</th>
        <th>题目类型</th>
        <th>是否必填</th>
        <th>是否开启备注</th>
        <th>选项列表</th>
        <th>排序</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>
    {loop $question_list $index $question}
    <tr>
        <td>{$question['title']}</td>
        <td>
            {if $question['type']==='1'} 单选题
            {elseif $question['type']==='2'} 多选题
            {else} 填空题
            {/if}
        </td>
        <td>
            {if $question['is_required']==='1'}
            <span  class="label label-danger">必选</span>
            {else}
            <span  class="label label-default">选填</span>
            {/if}
        </td>
        <td>
            {if $question['type']!=='3'}
                {if $question['is_open_remark']==='0'}
                <span class="label label-danger">暂未开启备注</span>
                {else}
                <div class="label label-success">已开启备注</div>
                {/if}
            {/if}
        </td>
        <td>
            <ul>
                {loop $question['children_list'] $children}
                <li>{$children['title']}</li>
                {/loop}
            </ul>
            {if $question['type']!=='3'}
            <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#sort_select{$children['id']}">选项排序</button>
            <!-- Modal -->
            <div class="modal fade bs-example-modal-sm" id="sort_select{$children['id']}" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">选项排序</h4>
                        </div>
                        <div class="modal-body">
                            <div class="alert alert-info" role="alert">
                                排序规则：数字越小越靠前
                            </div>
                            <ul>
                                <form action="{php echo $this->createWebUrl('question_manager').'&action=select_sort'}" method="post">
                                    {loop $question['children_list'] $children}
                                    <div class="input-group">
                                        <span class="input-group-addon" id="basic-addon3">{$children['title']}</span>
                                        <input type="number" value="{$children['select_sort']}" name="selectSort_{$children['id']}" class="form-control">
                                    </div>
                                    {/loop}
                                    <hr>
                                    <button type="submit" class="btn btn-primary pull-right">确定</button>
                                </form>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            {/if}
        </td>
        <td>
            {$question['sort']}
        </td>
        <td>
            <div class="btn-group btn-group-sm">
                <a href="{php echo $this->createWebUrl('question_manager').'&action=update&id='.$question['id']}" class="btn btn-success">修改</a>
                <a href="{php echo $this->createWebUrl('question_manager').'&action=delete&id='.$question['id']}" class="btn btn-danger">删除</a>
            </div>
        </td>
    </tr>
    {/loop}
    </tbody>
</table>

<style>

</style>

{template 'common/footer'}